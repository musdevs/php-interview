# –ì–¥–µ –≤—ã –æ—Å—Ç–∞–≤–ª—è–µ—Ç–µ —Å–ª–µ–¥—ã, –∫–æ–≥–¥–∞ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç–µ—Å—å –ø–æ SSH –∫ —Å–µ—Ä–≤–µ—Ä—É –Ω–∞ –±–∞–∑–µ Linux?

–°–æ–±—Ä–∞–ª –∫—Ä–∞—Ç–∫—É—é –ø–æ–¥–±–æ—Ä–∫—É –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–∞—à–∏—Ö
–∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –≤ Debian. –ë—É–¥–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–∞ –≤–æ –≤—Å–µ—Ö –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–∞—Ö –Ω–∞ –µ—ë –æ—Å–Ω–æ–≤–µ. –î–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –≤
–≤–∏–¥–µ –∏–º—ë–Ω –∏ –ø—É—Ç–µ–π –∫ –ª–æ–≥–∞–º, –Ω–æ –æ–±—â–∏–π —Å–º—ã—Å–ª –±—É–¥–µ—Ç —Ç–æ—Ç –∂–µ.

–ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π —Å—Ä–∞–∑—É –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é, —á—Ç–æ –µ—Å–ª–∏ –ª–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤–æ –≤–Ω–µ—à–Ω–µ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, —Ç–æ –≤—ã —Ç–∞–º –Ω–∞—Å–ª–µ–¥–∏–ª–∏ —Å—Ä–∞–∑—É –≤ –º–æ–º–µ–Ω—Ç
–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è. –ü–æ—ç—Ç–æ–º—É –≤–∞–∂–Ω–æ –∏–º–µ—Ç—å —Å–≤–æ—ë –≤–Ω–µ—à–Ω–µ–µ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫–æ –≤—Å–µ–º —Å–µ—Ä–≤–µ—Ä–∞–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ª–æ–≥–æ–≤.

1Ô∏è‚É£ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ SSH —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ /var/log/auth.log. –° –Ω–∏–º –≤—Å—ë –ø—Ä–æ—Å—Ç–æ - —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –ª–æ–≥. –°—Ä–∞–∑—É –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —É–¥–∞—á–Ω—ã–µ
–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–∂–Ω–æ —Ç–∞–∫:

# grep 'Accepted' /var/log/auth.log

–õ–æ–≥–∞ –º–æ–∂–µ—Ç –Ω–µ –±—ã—Ç—å, –ª–∏–±–æ –ª–æ–≥–∏ –º–æ–≥—É—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ journald. –°–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–∫:

# journalctl -u ssh -r

2Ô∏è‚É£ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–∞ –≤ –±–∏–Ω–∞—Ä–Ω—ã–π –ª–æ–≥ /var/log/wtmp. –°–º–æ—Ç—Ä–µ—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –∫–æ–º–∞–Ω–¥–æ–π last. –£–≤–∏–¥–∏—Ç–µ
–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–∞—Ç–µ –ª–æ–≥–∏–Ω–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –µ–≥–æ IP –∞–¥—Ä–µ—Å–µ. –¢–∞–º –∂–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–≥—Ä—É–∑–∫–∞—Ö –∏
–≤—ã–∫–ª—é—á–µ–Ω–∏—è—Ö —Å–µ—Ä–≤–µ—Ä–∞, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∫–µ–º –æ–Ω–∏ –±—ã–ª–∏ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω—ã. –ú–æ–≥—É —Å—Ä–∞–∑—É –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ—Å–æ–≤–µ—Ç–æ–≤–∞—Ç—å –∫–ª—é—á–∏:
last -Faiwx.

3Ô∏è‚É£ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ª–æ–≥–∏–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–∞–π–ª–µ /var/log/lastlog. –°–º–æ—Ç—Ä–µ—Ç—å –æ–¥–Ω–æ–∏–º—ë–Ω–Ω–æ–π
–∫–æ–Ω—Å–æ–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π lastlog. –£–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥–∞—Ç—É –∏—Ö –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–º–µ—Å—Ç–µ —Å IP
–∞–¥—Ä–µ—Å–æ–º.

4Ô∏è‚É£ –ü–æ–∫–∞ –≤—ã –Ω–µ –æ—Ç–∫–ª—é—á–∏–ª–∏—Å—å, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–π –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏ –≤–º–µ—Å—Ç–µ —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ —Å–µ—Å—Å–∏—è–º–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–∞–π–ª–µ
/var/run/utmp. –°–º–æ—Ç—Ä–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ—Ç—Ç—É–¥–∞ –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π who.

5Ô∏è‚É£ –ï—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –±—ã–ª–∏ –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ª–æ–≥–∏–Ω–æ–º –∏ –ø–∞—Ä–æ–ª–µ–º, —Ç–æ —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞
–≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ñ–∞–π–ª–µ /var/log/btmp. –°–º–æ—Ç—Ä–µ—Ç—å –∫–æ–º–∞–Ω–¥–æ–π lastb:

```shell
sudo lastb -i root
```

6Ô∏è‚É£ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –¥–µ–ª–∞–ª–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏, —Ç–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ ~/.bash_history. –ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ,
—á—Ç–æ–±—ã —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ, –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç–µ –º–µ—Å—Ç–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤
–∫–æ–Ω—Å–æ–ª–∏:

# export HISTFILE=/dev/null

–í —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏ –∏—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –ø–æ –∫–æ–º–∞–Ω–¥–µ history, –Ω–æ –≤ —Ñ–∞–π–ª –∑–∞–ø–∏—Å–∞–Ω–∞ –Ω–µ –±—É–¥–µ—Ç.

–î–ª—è —Å–∫—Ä—ã—Ç–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –º–æ–∂–Ω–æ –±–∞–Ω–∞–ª—å–Ω–æ –æ–±–Ω—É–ª–∏—Ç—å —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤—ã—à–µ –ª–æ–≥–∏ –∏ –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã. –û –≤–∞—Å –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è
–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –Ω–æ —Å—Ç–∞–Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –∫—Ç–æ-—Ç–æ –ø–æ–¥–∫–ª—é—á–∞–ª—Å—è. –Ø, –∫—Å—Ç–∞—Ç–∏, —Å –ø–æ–¥–æ–±–Ω—ã–º —Å—Ç–∞–ª–∫–∏–≤–∞–ª—Å—è. –ö–æ–≥–¥–∞ —Ç–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–∏–ª—Å—è –≤ –æ–¥–Ω—É
–∫–æ–º–ø–∞–Ω–∏—é. –ß–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã, –∫–æ–≥–¥–∞ —Å—Ç–∞–ª –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∞–∫–∏ –∏ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ,
–∑–∞–º–µ—Ç–∏–ª –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ —Å–µ—Ä–≤–µ—Ä–æ–≤ –æ—á–∏—â–µ–Ω–Ω—É—é –∏—Å—Ç–æ—Ä–∏—é –∏ –ø—Ä–æ—á–∏–µ —Å–ª–µ–¥—ã. –û—Å—Ç–∞—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –≥–∞–¥–∞—Ç—å, —á—Ç–æ —Ç–∞–º –¥–µ–ª–∞–ª –±—ã–≤—à–∏–π –∞–¥–º–∏–Ω.

–ü—Ä–æ—Å—Ç–æ –≤–∑—è—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ –∏–∑ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –Ω–µ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ. –ö–∞–∫ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ - –≤–∑—è—Ç—å –≥–æ—Ç–æ–≤—ã–π
—Å–∫—Ä–∏–ø—Ç (https://raw.githubusercontent.com/JusticeRage/freedomfighting/refs/heads/master/nojail.py3), –∫–æ—Ç–æ—Ä—ã–π –Ω–∞ –æ—Å–Ω–æ–≤–µ
IP –∞–¥—Ä–µ—Å–∞ –≤—ã—á–∏—Å—Ç–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏–∑ –±–∏–Ω–∞—Ä–Ω—ã—Ö –ª–æ–≥–æ–≤. –£ –º–µ–Ω—è –Ω–∞ Debian 12 –æ–Ω –Ω–µ –∑–∞–≤—ë–ª—Å—è. –í—Å—ë –≤—Ä–µ–º—è —Ä—É–≥–∞–ª—Å—è –Ω–∞
UTMP block size. –ú—É—á–∞–ª —É–∂–µ —Ä–æ–¥–Ω–æ–π ChatGPT —Å chatgpt.com –Ω–∞ —ç—Ç—É —Ç–µ–º—É, –Ω–µ —Å–º–æ–≥ –ø–æ–º–æ—á—å. –ú–Ω–æ–≥–æ –≤—Å–µ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–∏–ª, –Ω–æ –Ω–∏—á–µ–≥–æ –Ω–µ
–ø–æ–º–æ–≥–ª–æ. –í –∫–æ–Ω—Ü–µ –ø—Ä–µ–¥–ª–æ–∂–∏–ª –ø–æ-–¥—Ä—É–≥–æ–º—É –æ—á–∏—Å—Ç–∏—Ç—å —Ñ–∞–π–ª: —É–¥–∞–ª–∏—Ç—å –∏ –∑–∞–Ω–æ–≤–æ —Å–æ–∑–¥–∞—Ç—å. –ó–∞–±–∏–ª.

–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ—Ç –ø–æ–¥–æ–±–Ω—ã—Ö –æ—á–∏—Å—Ç–æ–∫ –∑–∞—â–∏—Ç–∏—Ç—å—Å—è, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –Ω–∞ –ª—é–±–æ–º Linux —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å syslog
—Å–µ—Ä–≤–µ—Ä (https://t.me/srv_admin/4056) –∏–ª–∏ systemd-journal-remote (https://t.me/srv_admin/3136). –ò –≤—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç–µ –∑–Ω–∞—Ç—å,
–∫—Ç–æ –∏ –∫–æ–≥–¥–∞ –∫ –≤–∞–º –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è. –î–ª—è –ª–æ–≥–æ–≤ —Å–ª—É–∂–±—ã sshd –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏ –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤, –Ω–∏ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ. –ù–µ—Ç –Ω—É–∂–¥—ã
—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –∫–∞–∫–æ–µ-—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –ª–æ–≥–æ–≤, –µ—Å–ª–∏ —É –≤–∞—Å –≤ –Ω—ë–º –Ω–µ—Ç –Ω—É–∂–¥—ã. –Ø –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è syslog —Å–µ—Ä–≤–µ—Ä–∞
–ø–æ–¥–Ω–∏–º–∞–ª –≤–∏—Ä—Ç—É–∞–ª–∫—É 1CPU/512M/10G.

‚ùóÔ∏è–ï—Å–ª–∏ –∑–∞–º–µ—Ç–∫–∞ –≤–∞–º –ø–æ–ª–µ–∑–Ω–∞, –Ω–µ –∑–∞–±—É–¥—å—Ç–µ üëç –∏ –∑–∞–±—Ä–∞—Ç—å –≤ –∑–∞–∫–ª–∞–¥–∫–∏.

#terminal #security
