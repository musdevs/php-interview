# Собеседование

## PHP

Разница между PHP 8.1 и 7.4

### Генераторы

Зачем генераторы?
  Экономить память

Можно перемотать генератор назад?
  Нельзя

Есть преимущество у генератора перед итераторами?
  Да, простота. Не нужно реализовывать интерфейс итератора

В чем отличие:
 - yield [] - вернет пустой массив
 - yield from [] - завершит работу генератора

### Стрелочные функции (PHP 7.4)

Стрелочные - короткий синтаксис анонимных. Обе реализованы через класс Closure.

Разница между стрелочной и анонимной функции?
  В стрелочных функциях переменные из родительской области доступны автоматически. В анонимных нужно использовать use.
  В стрелочных можно использовать только один оператор
  Стрелочные функции используют привязку переменных по значению

### Namespaces

Для чего используются пространства имен?
1. Устранить конфликт имен между нашим и сторонним кодом
2. Улучшить читаемость кода за счет сокращения названия

  autoload": {
    "psr-4": {
    "App\\": "app/",
    },
  },

### Операторы

Что такое оператор безопасного null - nullsafe?
  Проверяет левую часть оператора на null и если разыменование выдает null, то возвращает null,
  а остальную часть цепочки пропускает

Можно ли nullsafe-оператор использовать для записи в свойство?
  Нет, только чтение

```php
$country = $session?->user?->getAddress()?->country;
```


## ООП

Можно в интерфейсе объявлять константы, конструктор?
  Да

Можно в абстрактном классе объявить абстрактный private-метод?
  Нет, только protected и public

Может наследование нарушать инкапсуляцию суперкласса?
  Да, подклассам доступны детали родителя (protected?)

Какие альтернативы есть наследованию?
  Композиция, агрегация

Трейты
Разница между абстрактным классом и интерфейсом

## БД

### В чем отличие Postgres и MySQL?

Типы данных
PostgreSQL поддерживает больше типов данных:
- массивы,
- hstore (хранилище типа “ключ-значение”)
- JSONB (бинарный JSON).

Индексирование
- MySQL - по умолчанию используется тип индекса B-tree
- PostgreSQL:
  - GiST (Generalized Search Tree. Обобщенное поисковое дерево)
  - GIN (Generalized Inverted Index. Обобщенный обратный индекс)

Репликация
PostgreSQL поддерживает мульти-мастер (с несколькими мастерами) репликацию
MySQL в основном поддерживает репликацию master-slave (ведущий-ведомый)

Транзакции
PostgreSQL более приспособлена для обработки параллельного доступа к данным

Хранимые процедуры
PostgreSQL - несколько языков (не только PL/pgSQL)
MySQL - только SQL

PostgreSQL - быстрее при записи, MySQL быстрее при чтении

### Как включить журналирование медленных запросов
  SET GLOBAL slow_query_log = 'OFF';

Как сохранить JSON в MySQL
  Создать столбец с типом JSON (с версии MySQL 5.7.8 2015-08-03)

DEADLOCK в БД

MySQL как посмотреть список таблиц в консоли?
SHOW DATABASES;
USE ...;
SHOW TABLES;

### Агрегирующие функции

Чем HAVING отличается от WHERE?
  - Условия наклдываются на агрегатные функции, уже после того как отработают условия в WHERE.
  - Сначала WHERE, потом GROUP BY, потом HAVING

Когда индексы могут мешать?
  - Замедляют процесс обновления данных

Транзакции
Уровни изоляции

Как обновить значение поля в большом количестве строк?
  Использовать LIMIT в UPDATE, DELETE, чтобы не блокировать всю огромную таблицу

### В чем отличие hash индексов от B-Tree?

B-tree индексы подходят для общих задач индексирования,
а Hash индексы — для ситуаций, когда нужно быстро находить строки на основе точных совпадений.

## NoSQL

### Redis - сервер БД типа ключ-значение

Очень быстрая БД key-value In-memory, имеет консистентное хранилище на диске

#### Варианты использования

- Кэш
- Хранилище
- сервис уведомлений SUBSCRIBE channel - PUBLISH
- сервер очередей

#### Какие типы данных?

- хеш-таблицы (HSET, HGET, HVALS, HKEYS) - аналог в PHP ассоциативный массив
- множества (SADD, SMEMBERS, SCARD, SUNION, SDIFF, SINTER, SPOP)
- списки (LPUSH, LRANGE, RPUSH, LPOP, RPOP)
- упорядоченные множества

#### Где хранить можно данные?

#### В чем отличие Redis от Memcached

В Redis можно хранить сложные комплексные данные


#### В чем отличие Redis от RabbitMQ

RabbitMQ - только сервер очередей, а Redis - комбайн

##
Ревью
Как привести к одному стилю код всех разработчиков?

## Авторизация

JWT-токен. Зачем, из чего состоит?
OAuth 2, какой флоу?

## Тесты

Использовали тесты? Почему?
Как тестировать закрытый метод? - Рефлексия
Как перехватывать все исключения?

Фреймворки для тестирования
* Codeception
* PHPUnit

В чем отличие? Codeception использует PHPUnit. Codeception добавляет некоторые функции или помощники (helpers), которые позволяют упростить часть задач.

php artisan test --filter MyClass::method1

## Highload

Как отправить во внутренние системы много запросов? - Асинхронные запросы

## Laravel

Жизненный цикл запроса
Что такое сервис-контейнер
Работал с гейтами
Моки, стабы
Eloquent with - зачем? n+1
Паттерны в Laravel
Как запустить тесты в Laravel? В докере? Конкретный тест
Как отложить время выполнения джобы? dispatch()->delay()

В Laravel можно использовать несколько подключений к БД?
  Да

Как в одном построителе указать, чтобы выбрались отношения?
  $posts = Post::with(['author.team'])->get();
    select * from posts // предположим, что запрос вернул 5 сообщений
    select * from authors where id in( { post1.author_id }, { post2.author_id }, { post3.author_id }, { post4.author_id }, { post5.author_id } )
    select * from teams where id in( { author1.team_id }, { author2.team_id }, { author3.team_id }, { author4.team_id }, { author5.team_id } )

### Octane

Зачем?
Особенности?
 - Постоянно находится в памяти
 - Может течь память, если не контролировать статические объекты


## Git

Как перекинуть коммит
git cherry-pick
git rebase vs merge

git remote -v
git remote set-url

Как посмотреть список веток удаленного репозитория?
git --no-pager branch -r


## Инфраструктура

Работаете в консоли Linux?
Как запустить nginx на локальном хосте?
Как организован CI/CD?
Pipeline?
Docker?

## Стандарты

Слышали про набор рекомендаций для PHP (PSR)?
 - Автозагрузка классов
   0
   4
 - Стили кодирования
   1, 2, 12
 - Интерфейсы
   3, 16 - логи
   6/16 - кэш
   11, 13, 14

## Паттерны

Singleton - почему антипаттерн?

ES?



Нужно сделать печатную форму заказа.


## Ресурсы

* [Тестирование в Тинькофф](https://www.tinkoff.ru/career/it/interview/backend/)
